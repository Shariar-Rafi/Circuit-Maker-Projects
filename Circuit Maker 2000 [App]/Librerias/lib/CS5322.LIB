*	|==========================================================
*	|
*	|
*	|
*	|			   CS5322
*	|
*	|			ON SEMICONDUTOR
*	|
*	|		Two-Phase Buck Controller
*	|
*	|			with  5-Bit DAC and with Integrated Drivers
*	|
*	|		200kHz to 800kHz Operation (Per Phase)
*	|
*	|
*	|
*	|	This model was developed by
*	|
*	|	AEI (Analytic Engineering)
*	|
*	|	182 Morris Avenue
*	|
*	|	Holtsville, NY 11742
*	|
*	|	Copyright 2001 AEI
*	|
*	|	All Rights Reserved
*	|
*	|
*	|
*	|	The content of this model is subject to change
*	|
*	|	without notice and may not be modified or altered
*	|
*	|	without permission from On Semiconductor. This model
*	|
*	|	has been carefully checked and is believed to be
*	|
*	|	accurate, however neither AEI nor On Semiconductor
*	|
*	|	assume liability for the use of this model or the
*	|
*	|	results obtained from using it.
*	|
*	|
*	|
*	|	For more information regarding modeling services,
*	|
*	|	model libraries or simulation productors, please
*	|
*	|	call AEI at (631) 654-0253 ext 116 or 106.
*	|
*	|	email: Sales@aeng.com.
*	|
*	|
*	|
*	|==========================================================
**********
*SRC=CS5322;CS5322;ON_SEMI;;2 PHASE BUCK CONTROLLER
*SYM=CS5322
.SUBCKT CS5322 1 2 3 4 5 6 7 8 9 10 11 12 13 14
+ 15 16 17 18 19 20 0 22 23 24 25 26 27 28
*TERMINAL IDENTIFICATION:
*COMP=1 VFB=2 VDRP=3 CS1=4 CS2=5 CSREF=6 PWRGD=7
*VID0=8 VID1=9 VID2=10 VID3=11 VID4=12 ILIM=13 REF=14
*VCCH2=15 GATE(H)2=16 GND2=17 GATE(L)2=18 VCCL2=19 SS=20 LGND=0
*VCCH1=22 GATE(H)1=23 GND1=24 GATE(L)1=25 VCCL1=26 VCCL=27 ROSC=28
.MODEL D5322 D (RS=0.78 N=0.005 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D5322A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL Q5322 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=500P TR=85N)
.MODEL Q5322A NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=500P TR=10N)
.MODEL VCCL_5322 SW (VT=4.3 VH=0.1 RON=1 ROFF=1MEG
.MODEL VCCH_5322 SW (VT=1.9 VH=0.1 RON=1 ROFF=1MEG
.SUBCKT POLE5322 1 2
*PARAMS ARE DC GAIN = {K}
* POLE FREQ = {FP} HERTZ
E1 0 3 1 0 {K}
RI 1 0 1E12
R1 3 4 1MEG
R2 4 2 1MEG
C2 2 4 {1U/(6.28319*FP)}
E2 2 0 0 4 1E6
.ENDS
.SUBCKT LIMIT5322 1 2
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
.SUBCKT RS5322 2 3 4 5 {TD=1N}
*RS LATCH FLIP FLOP TERMINAL ID#
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
B1 29 0 V=3.31/(1+EXP(3.235-1.96*V(27)))
I1 42 14 1M
D1 14 42 D5322
V1 29 42 
R1 14 0 1G
S1 42 30 27 0 VCCL_5322
R2 30 0 100K
B2 27 0 I=I(V1)
B3 31 32 V=V(12)>1.25 ? 0.4 : 0
B4 33 31 V=V(11)>1.25 ? 0.2 : 0
B5 34 33 V=V(10)>1.25 ? 0.1 : 0
B6 35 34 V=V(9)>1.25 ? 0.05 : 0
V2 36 0 1.85
B7 36 35 V=V(8)>1.25 ? 0.025 : 0
R3 11 0 1G
R4 10 0 1G
R5 9 0 1G
R6 8 0 1G
R7 12 0 1G
R8 37 12 50K
D2 42 38 D5322A
R9 38 11 50K
D3 42 39 D5322A
R10 39 10 50K
D4 42 40 D5322A
R11 40 9 50K
D5 42 41 D5322A
R12 41 8 50K
D6 42 37 D5322A
V3 44 0 PULSE 0 2 0.1U
V4 45 0 PULSE 0 86.4K 0 86.4K
V5 67 28 
S2 42 46 22 0 VCCH_5322
R13 46 0 100K
E1 47 0 4 6 100
E2 43 0 5 6 100
X1 48 50 POLE5322 {K=31.5M FP=7MEG }
X2 49 51 POLE5322 {K=31.5M FP=7MEG }
X3 43 49 LIMIT5322 {K=1 PLIM=20 NLIM=0.1 }
X4 47 48 LIMIT5322 {K=1 PLIM=20 NLIM=0.1 }
B8 59 0 V=V(50)+V(51)
X5 59 53 POLE5322 {K=2 FP=3K }
B9 3 59 V=V(32)
B10 56 0 V=V(44)>1 ? V(30)>1.65 ? V(46)>1.65 ? V(53)<V(13) ? 2 : 0
B11 0 54 I=V(6)<(1.11*V(32)) ? V(6)>(0.89*V(32)) ? 0  : 100U
Q1 7 54 0 Q5322
C1 54 0 15N IC=0.65
R17 54 0 20K
X6 56 55 52 57 RS5322 {TD=1N }
B12 55 0 V=V(56)<1 ? 2 : 2/(1+EXPL((200*(0.27-V(20))),1K))
D7 0 58 D5322
D8 58 42 D5322A
R21 20 58 1
B13 42 58 I=15U*V(57)
B14 58 0 I=3.75U*V(52)
Q2 61 62 0 Q5322
B15 0 62 I=4.3U*V(63)
X7 60 63 LIMIT5322 {K=1 PLIM=10 NLIM=10 }
E3 60 0 61 58 5K
R22 62 0 20K
R23 61 1 1M
R24 61 0 2.5MEG
E4 65 0 32 2 2.133K
X8 65 66 LIMIT5322 {K=1 PLIM=100 NLIM=100 }
B16 0 61 I=30U*(1-EXP(-V(66)))/(1+EXP(-V(66)))
D10 61 64 D5322
B17 64 0 V=V(42)*0.82
D9 0 61 D5322
B18 67 0 V=V(42)/3.305
D11 0 2 D5322
B19 2 0 I=I(V5)/3
B20 68 0 V=V(1)<(V(50)+0.4+V(2)) ? 2 : 0
R26 68 70 43K
C3 70 0 10P
B21 72 0 V=V(70)>1 ? 2 : 0
B22 69 0 V=V(1)<(V(51)+0.4+V(2)) ? 2 : 0
R27 69 71 43K
C4 71 0 10P
B23 73 0 V=V(71)>1 ? 2 : 0
X9 75 74 81 76 RS5322 {TD=1N }
B24 75 0 V=V(44)>1 ? V(52)<1 ? V(72)<1 ? V(50)<0.33 ? 2 : 0
B25 74 0 V=V(75)<1 ? 2 : V(82)
X10 77 78 79 80 RS5322 {TD=1N }
B26 77 0 V=V(75)>1 ? V(76)>1 ? 2 : 0
B27 78 0 V=V(77)>1 ? V(74)>1 ? 0 : 2
B28 82 0 V=(SIN(81.43G*I(V5)*V(45)))>0 ? 2 : 0
X11 83 84 85 88 RS5322 {TD=1N }
B29 83 0 V=V(44)>1 ? V(52)<1 ? V(73)<1 ? V(51)<0.33 ? 2 : 0
B30 84 0 V=V(83)<1 ? 2 : V(82)>1 ? 0 : 2
X12 86 87 89 90 RS5322 {TD=1N }
B31 86 0 V=V(83)>1 ? V(88)>1 ? 2 : 0
B32 87 0 V=V(86)>1 ? V(84)>1 ? 0 : 2
E5 91 24 108 93 1
Q3 94 95 108 Q5322A
Q4 108 96 24 Q5322A
V9 91 97 
R28 93 95 1
R29 97 96 1
R30 23 98 8
C5 98 24 14N
E6 94 24 22 24 1
V10 108 23 
B33 22 24 I=I(V10)<0 ? 0 : I(V10)
B34 108 93 I=1.4M*V(101)*(V(22)-V(24))+I(V9)
R31 24 23 12K
B35 101 0 V=(V(25)-V(24))<1.8 ? V(80)>1 ?  2 : -2
R33 18 112 8
B36 102 0 V=(V(23)-V(24))<1.8 ? V(79)>1 ?  2 : -2
E7 92 24 100 103 1
Q5 104 105 100 Q5322A
Q6 100 106 24 Q5322A
V11 92 107 
R34 103 105 1
R35 107 106 1
R36 25 109 8
C7 109 24 14N
E8 104 24 26 24 1
V12 100 25 
B37 26 24 I=I(V12)<0 ? 0 : I(V12)
B38 100 103 I=1.4M*V(102)*(V(26)-V(24))+I(V11)
R37 24 25 12K
C8 129 17 14N
C9 112 17 14N
E9 99 17 110 111 1
Q7 113 114 110 Q5322A
Q8 110 115 17 Q5322A
V13 99 116 
R39 111 114 1
R40 116 115 1
R41 16 129 8
E10 113 17 15 17 1
V14 110 16 
B39 15 17 I=I(V14)<0 ? 0 : I(V14)
B40 110 111 I=1.4M*V(117)*(V(15)-V(17))+I(V13)
R42 17 16 12K
E11 120 17 121 122 1
Q9 123 124 121 Q5322A
Q10 121 125 17 Q5322A
V15 120 126 
R43 122 124 1
R44 126 125 1
E12 123 17 19 17 1
V16 121 18 
B41 19 17 I=I(V16)<0 ? 0 : I(V16)
B42 121 122 I=1.4M*V(118)*(V(19)-V(17))+I(V15)
R45 17 18 12K
B43 117 0 V=(V(18)-V(17))<1.8 ? V(90)>1 ?  2 : -2
B44 118 0 V=(V(16)-V(17))<1.8 ? V(89)>1 ?  2 : -2
*DESIGN ENGINEER : KEHINDE OMOLAYO, 7-23-01
.ENDS
**********
