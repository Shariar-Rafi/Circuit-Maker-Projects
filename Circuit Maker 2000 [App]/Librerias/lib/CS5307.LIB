*	|==========================================================
*	|
*	|
*	|
*	|			   CS5307 REVISION B
*	|
*	|			ON SEMICONDUTOR
*	|
*	|		 Four-Phase Buck CPU Controller
*	|
*	|			with  5-Bit DAC
*	|
*	|		200kHz to 800kHz Operation (Per Phase)
*	|
*	|
*	|
*	|	This model was developed by
*	|
*	|	AEI (Analytic Engineering)
*	|
*	|	182 Morris Avenue
*	|
*	|	Holtsville, NY 11742
*	|
*	|	Copyright 2001 AEI
*	|
*	|	All Rights Reserved
*	|
*	|
*	|
*	|	The content of this model is subject to change
*	|
*	|	without notice and may not be modified or altered
*	|
*	|	without permission from On Semiconductor. This model
*	|
*	|	has been carefully checked and is believed to be
*	|
*	|	accurate, however neither AEI nor On Semiconductor
*	|
*	|	assume liability for the use of this model or the
*	|
*	|	results obtained from using it.
*	|
*	|
*	|
*	|	For more information regarding modeling services,
*	|
*	|	model libraries or simulation productors, please
*	|
*	|	call AEI at (631) 654-0253 ext 116 or 106.
*	|
*	|	email: Sales@aeng.com.
*	|
*	|DESIGNER: KEHINDE OMOLAYO
*	|
*	|==========================================================
**********
*SRC=CS5307;CS5307;ONSEMI;;4 PHASE BUCK CPU CONTROLLER
*SYM=CS5307
.SUBCKT CS5307 0 2 3 4 5 6 7 8 9 10 11 12 
+ 13 14 15 16 17 18 19 20 21 22 23 24
*TERMINAL IDENTIFICATIONS:
*GND=0 OSCSET=2 ROSC=3 CS1=4 CS2=5 CS3=6 CS4=7 CSREF=8
*VDRP= 9 VFB=10 COMP=11 SS=12 PWRGD=13 SGND=14
*V1D4=15 V1D3=16 V1D2=17 V1D1=18 V1D0=19
*GATE4=20 GATE3=21 GATE2=22 GATE1=23 VCC=24
.MODEL Q5307 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=500P TR=85N)
.MODEL D5307 D (RS=0.78 N=0.005 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL D5307A D (RS=0.78 N=1.95 IS=7.075E-9 
+ CJO=4P TT=7.2N M=.4 VJ=.657 BV=100 IBV=100U)
.MODEL UVL_5307 SW (VT=8.5 VH=0.5 RON=1 ROFF=1MEG
.SUBCKT POLE5307 1 2
*PARAMS ARE DC GAIN = {K}
* POLE FREQ = {FP} HERTZ
E1 0 3 1 0 {K}
RI 1 0 1E12
R1 3 4 1MEG
R2 4 2 1MEG
C2 2 4 {1U/(6.28319*FP)}
E2 2 0 0 4 1E6
.ENDS
.SUBCKT LIMIT5307 1 2
*PARAMETERS ARE GAIN={K} 
*POS LIMIT = {PLIM}  NEG LIMIT = {NLIM}
RIN 1 0 1E12
E1 3 0 0 1 {K}
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
*DIODES WILL HAVE .0597V DROP AT 10V INPUT FOR GAIN=1
*IDIODE = IS*EXP(.597/.O26)
VN 5 2 {NLIM-.0597}
DN 4 5 DN
.MODEL DN D(IS=1E-12 N=.14319)
VP 2 6 {PLIM-.0597}
DP 6 4 DN
.ENDS
.SUBCKT RS5307 2 3 4 5 {TD=1N}
*RS LATCH FLIP FLOP TERMINAL ID#
*SET=2 RESET=3 Q=4 QB=5
C1 11 0 10P
R3 10 8 {TD/6.9315P}
C3 8 0 10P
B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B5 4 0 V=V(8)>1 ? 2 : 0
B6 5 0 V=V(11)>1 ? 2 : 0
R1 16 11 {TD/6.9315P}
.ENDS
.SUBCKT OSC5307 1 2 6 8
B2 4 0 V=COS(V(3))+COS(3*V(3))/9+COS(5*V(3))/25+COS(7*V(3))/49+
+COS(9*V(3))/81+COS(11*V(3))/121+COS(13*V(3))/169+COS(15*V(3))/225
B3 5 0 V=SIN(V(3))+SIN(3*V(3))/3+SIN(5*V(3))/5+SIN(7*V(3))/7+
+SIN(9*V(3))/9+SIN(11*V(3))/11+SIN(13*V(3))/13+SIN(14*V(3))/14
B4 6 0 V=(0.5+0.405284734*V(4))*0.14
B5 7 0 V=0.5+0.636619772*V(5)
B6 8 0 V=2/(1+EXP(200*(V(7)-0.5)))
B1 3 0 V=6.283185307*V(1)*V(2)
.ENDS
S1 25 30 24 0 UVL_5307
R1 30 0 100K
B1 25 119 V=3.3/(1+EXP(16.5-5*V(24)))
D1 25 31 D5307A
R2 31 15 50K
D2 25 26 D5307A
R3 26 16 50K
D3 25 27 D5307A
R4 27 17 50K
D4 25 28 D5307A
R5 28 18 50K
D5 25 29 D5307A
R6 29 19 50K
B2 35 36 V=V(15)>1.25 ? 0.4 : 0
B3 32 35 V=V(16)>1.25 ? 0.2 : 0
B4 33 32 V=V(17)>1.25 ? 0.1 : 0
B5 37 33 V=V(18)>1.25 ? 0.05 : 0
V1 34 14 1.725
B6 34 37 V=V(19)>1.25 ? 0.025 : 0
R7 16 0 1G
R8 17 0 1G
R9 18 0 1G
R10 19 0 1G
R11 15 0 1G
E1 124 0 4 8 100
E3 111 0 5 8 100
E5 116 0 6 8 100
E7 121 0 7 8 100
X1 46 38 POLE5307 {K=40M FP=7MEG }
X2 46 39 POLE5307 {K=30M FP=7MEG }
X3 52 40 POLE5307 {K=40M FP=7MEG }
X4 51 42 POLE5307 {K=40M FP=7MEG }
X5 52 41 POLE5307 {K=30M FP=7MEG }
X6 51 43 POLE5307 {K=30M FP=7MEG }
X7 50 44 POLE5307 {K=40M FP=7MEG }
X8 50 45 POLE5307 {K=30M FP=7MEG }
B7 47 0 V=0.75*(V(38)+V(40)+V(42)+V(44))
X9 47 48 POLE5307 {K=1 FP=3.07K }
B8 49 0 V=V(47)+V(36)+10M
X10 49 9 LIMIT5307 {K=1 PLIM=7 NLIM=0.3 }
B9 53 0 I=V(57)<1 ? 10M : V(128)>1 ? 0 : 10M
C1 128 0 1N IC=0
R28 13 53 38
X11 55 54 56 58 RS5307 {TD=1N }
B10 55 0 V=V(57)<1 ? 0 : V(30)>1 ? V(48)<V(2) ? 2 : 0
B11 54 0 V=V(55)<1 ? 2 : V(62)<0.3 ? 0 : 2
V4 57 0 PULSE 0 2 0.1U
V5 59 0 PULSE 0 86.4K 0 86.4K
R31 12 62 1
B12 60 0 V=V(15)>1.25 ? V(16)>1.25 ? V(17)>1.25 ? V(18)>1.25 ? 
+ V(19)>1.25 ? 2 : V(30)>1 ? V(56)<1 ? 0 : 2
D6 62 25 D5307
D7 0 62 D5307
B13 25 62 I=80U*(2-V(56))
B14 62 0 I=2.5U*V(56)
Q2 156 67 0 Q5307
B15 0 67 I=4.3U*V(65)
X12 61 65 LIMIT5307 {K=1 PLIM=10 NLIM=10 }
E8 61 0 156 62 5K
R34 67 0 20K
R36 156 0 2.5MEG
E9 68 0 36 10 33.33
X13 68 63 LIMIT5307 {K=1 PLIM=100 NLIM=100 }
B16 0 156 I=30U*(1-EXP(-V(63)))/(1+EXP(-V(63)))
D8 0 156 D5307
D9 156 25 D5307
C2 156 0 1.5N
B17 69 0 V=V(11)<(V(8)+0.6+V(39)+V(98)) ? 2 : 0
R38 69 66 10.82K
C3 66 0 10P
B18 70 0 V=V(66)>1 ? 2 : 0
B19 71 0 V=V(11)<(V(8)+0.6+V(41)+V(101)) ? 2 : 0
R39 71 73 10.82K
C4 73 0 10P
B20 72 0 V=V(73)>1 ? 2 : 0
B21 74 0 V=V(11)<(V(8)+0.6+V(43)+V(104)) ? 2 : 0
R40 74 76 10.82K
C5 76 0 10P
B22 78 0 V=V(76)>1 ? 2 : 0
B23 75 0 V=V(11)<(V(8)+0.6+V(45)+V(107)) ? 2 : 0
R41 75 77 10.82K
C6 77 0 10P
B24 79 0 V=V(77)>1 ? 2 : 0
B25 80 0 V=V(38)>0.33 ? 2 : 0
R42 80 81 5.77K
C7 81 0 10P
B26 82 0 V=V(81)>1 ? 2 : 0
B27 83 0 V=V(40)>0.33 ? 2 : 0
R43 83 84 5.77K
C8 84 0 10P
B28 85 0 V=V(84)>1 ? 2 : 0
B29 86 0 V=V(42)>0.33 ? 2 : 0
R44 86 87 5.77K
C9 87 0 10P
B30 88 0 V=V(87)>1 ? 2 : 0
B31 89 0 V=V(44)>0.33 ? 2 : 0
R45 89 90 5.77K
C10 90 0 10P
B32 91 0 V=V(90)>1 ? 2 : 0
B33 92 0 V=V(60)<1 ? V(82)<1 ? V(70)<1 ? 2 : 0
B34 93 0 V=V(60)<1 ? V(85)<1 ? V(72)<1 ? 2 : 0
B35 94 0 V=V(60)<1 ? V(88)<1 ? V(78)<1 ? 2 : 0
B36 95 0 V=V(60)<1 ? V(91)<1 ? V(79)<1 ? 2 : 0
V8 0 119 
B37 100 0 V=V(59)-1/V(96)/4
B38 103 0 V=V(59)-1/V(96)/2
B39 106 0 V=V(59)-3/V(96)/4
X19 114 110 113 115 RS5307 {TD=1N }
B40 110 0 V=V(114)<1 ? 2 :  V(99)
B43 114 0 V=V(57)<1 ? 0 : V(92)
B44 96 0 V=12.96G*ABS(I(V10))+1
X21 118 120 122 125 RS5307 {TD=1N }
B45 120 0 V=V(118)<1 ? 2 : V(102)
B48 118 0 V=V(57)<1 ? 0 : V(93)
X23 127 129 133 137 RS5307 {TD=1N }
B49 129 0 V=V(127)<1 ? 2 : V(105)
B52 127 0 V=V(57)<1 ? 0 : V(94)
X25 134 135 141 142 RS5307 {TD=1N }
B53 135 0 V=V(134)<1 ? 2 : V(108)
B56 134 0 V=V(57)<1 ? 0 : V(95)
B58 144 0 V=V(25)/3.3
D10 0 10 D5307
B59 10 0 I=I(V10)/3
V10 144 3 
B60 24 0 I=I(V8)
D11 0 24 D5307
B61 143 0 V=(V(24)-2.6)*(V(145)+3M)/4.012*V(57)
B62 0 145 I=175U*(V(115)-V(113))
D12 0 145 D5307
D13 145 146 D5307
V11 143 147 
B63 24 0 I=I(V11)<0 ? 0 :  I(V11)
V12 146 0 2
R64 147 23 10
R65 23 0 100G
R66 145 0 10MEG
B64 148 0 V=(V(24)-2.6)*(V(151)+3M)/4.012*V(57)
B65 0 151 I=175U*(V(125)-V(122))
D14 0 151 D5307
D15 151 146 D5307
V13 148 149 
B66 24 0 I=I(V13)<0 ? 0 :  I(V13)
R67 149 22 10
R68 22 0 100G
R69 151 0 10MEG
B67 150 0 V=(V(24)-2.6)*(V(154)+3M)/4.012*V(57)
B68 0 154 I=175U*(V(137)-V(133))
D16 0 154 D5307
D17 154 146 D5307
V14 150 152 
B69 24 0 I=I(V14)<0 ? 0 :  I(V14)
R70 152 21 10
R71 21 0 100G
R72 154 0 10MEG
R73 11 156 1
B70 153 0 V=(V(24)-2.6)*(V(158)+3M)/4.012*V(57)
B71 0 158 I=175U*(V(142)-V(141))
D18 0 158 D5307
D19 158 146 D5307
V15 153 155 
B72 24 0 I=I(V15)<0 ? 0 :  I(V15)
R74 155 20 10
R75 20 0 100G
R76 158 0 10MEG
X27 59 96 98 99 OSC5307
X28 100 96 101 102 OSC5307
X29 103 96 104 105 OSC5307
X30 106 96 107 108 OSC5307
X31 124 46 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
X32 111 52 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
X33 116 51 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
X34 121 50 LIMIT5307 {K=1 PLIM=20 NLIM=0.3 }
B73 131 0 V=V(8)>0.975*V(36) ? V(8)<1.975 ? 2 : 0
R77 0 13 1G
D20 0 53 D5307
R78 131 128 721K
*DESIGN ENGINEER : KEHINDE OMOLAYO. REVISED DATE:8-13-01
.ENDS
**********
